<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Scouting 2017</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="css/vue-impression.css">
    <script src="vue.js"></script>
    <script src="vue-impression.js"></script>
    <script src="store2.min.js"></script>
    <script src="vue-resource.min.js"></script>
    <script src="fastclick.js"></script>
    <link rel="stylesheet" href="css/fontawesome.css">
    <style>
    .input-text-input,
    .input-number-input {
        font-size: 100%;
    }
    </style>
</head>

<body style="font-size: 120%">
    <div id="app">
        <sidelip v-model="menu" class="text-center">
            <group-title class="bg-primary" :style="{height: '8rem', padding: '2rem 1rem'}">
                <h2>Scouting</h2>
                <h4>Made by Arham Jain</h4></group-title>
            <group v-show="password == auth">
                <cell>
                    <btn theme="secondary" block @click="clear">CLEAR DATA</btn>
                </cell>
                <cell>
                    Number of forms: {{data.length}}
                </cell>
                <cell>
                    <btn theme="default" block @click="viewData = true">VIEW DATA</btn>
                </cell>
            </group>
            <cell>
                <div class="input-text">
                    <input type="password" v-model="password" class="input-text-input" placeholder="password pls">
                </div>
            </cell>
            </group>
        </sidelip>
        <slideup v-model="viewData">
            <slideup-header>
                <b>Data Stored on Device</b>
            </slideup-header>
            <cell v-for="d in data">
                Team: {{d.team}}
                <br> Match: {{d.match}}
            </cell>
        </slideup>
        <navbar>
            <icon name="navicon" size="lg" @click="menu = !menu"></icon>
            <h4 slot="body">Scouting</h4>
        </navbar>
        <div class="group-title">Info</div>
        <group>
            <cell>
                <div class="input-text">
                    <input type="number" v-model="d.team" class="input-text-input" placeholder="Team Number">
                </div>
            </cell>
            <cell>
                <div class="input-text">
                    <input type="number" v-model="d.match" class="input-text-input" placeholder="Match Number" style="font-size: 100%;">
                </div>
            </cell>
            <cell>
                <inline-selector v-model="d.color">
                    Alliance: &nbsp;
                    <inline-selector-option value="red">Blue</inline-selector-option>
                    <inline-selector-option value="blue">Red</inline-selector-option>
                </inline-selector>
            </cell>
            <cell>
                <inline-selector v-model="d.drive">
                    Drive: &nbsp;
                    <inline-selector-option value="mechanum">Mech</inline-selector-option>
                    <inline-selector-option value="tank">Tank</inline-selector-option>
                    <inline-selector-option value="omni">Omni</inline-selector-option>
                </inline-selector>
            </cell>
            <cell>
                <inline-selector v-model="d.wheels">
                    Wheels: &nbsp;
                    <inline-selector-option value="4">4</inline-selector-option>
                    <inline-selector-option value="6">6</inline-selector-option>
                    <inline-selector-option value="8">8</inline-selector-option>
                </inline-selector>
            </cell>
            <cell>
                <inline-selector v-model="d.airship">
                    People in Airship: &nbsp;
                    <inline-selector-option value="1">1</inline-selector-option>
                    <inline-selector-option value="2">2</inline-selector-option>
                </inline-selector>
            </cell>
        </group>
        <group-title>Auton</group-title>
        <group>
            <cell>
                <inline-selector v-model="d.autonmovement" multiple>
                    Movement: &nbsp;
                    <inline-selector-option value="moves">Moves</inline-selector-option>
                    <inline-selector-option value="cross">Crosses</inline-selector-option>
                </inline-selector>
            </cell>
            <cell>
                <inline-selector v-model="d.autongears" multiple>
                    Gears: &nbsp;
                    <inline-selector-option value="starts">Starts</inline-selector-option>
                    <inline-selector-option value="places">Places</inline-selector-option>
                </inline-selector>
            </cell>
            <cell>
                <inline-selector v-model="d.autonballs" multiple>
                    Balls: &nbsp;
                    <inline-selector-option value="starts">Starts</inline-selector-option>
                    <inline-selector-option value="low">Low</inline-selector-option>
                    <inline-selector-option value="high">High</inline-selector-option>
                </inline-selector>
            </cell>
        </group>
        <group-title>Teleop</group-title>
        <cell>
            <inline-selector v-model="d.telopgears" multiple>
                Gears: &nbsp;
                <inline-selector-option value="loadingstation">Station</inline-selector-option>
                <inline-selector-option value="floor">Floor</inline-selector-option>
                <inline-selector-option value="places">Places</inline-selector-option>
            </inline-selector>
        </cell>
        <cell>
            Gears Placed &nbsp;
            <input-number :min="0" v-model="d.telopgearsplaced"></input-number>
        </cell>
        <cell>
            <inline-selector v-model="d.telopballcollec" multiple>
                Ball Collection: &nbsp;
                <inline-selector-option value="loadingstation">Station</inline-selector-option>
                <inline-selector-option value="floor">Floor</inline-selector-option>
            </inline-selector>
        </cell>
        <cell>
            <inline-selector v-model="d.telopballscore" multiple>
                Ball Goal: &nbsp;
                <inline-selector-option value="low">Low</inline-selector-option>
                <inline-selector-option value="high">High</inline-selector-option>
            </inline-selector>
        </cell>
        <cell>
            <inline-selector v-model="d.telopballrating">
                Ball Scoring: &nbsp;
                <inline-selector-option value="low">Trash</inline-selector-option>
                <inline-selector-option value="mid">1504</inline-selector-option>
                <inline-selector-option value="high">God</inline-selector-option>
            </inline-selector>
        </cell>
        <group-title>Humans</group-title>
        <group>
            <cell>
                <inline-selector v-model="d.human">
                    Pilot: &nbsp;
                    <inline-selector-option value="low">Trash</inline-selector-option>
                    <inline-selector-option value="mid">1504</inline-selector-option>
                    <inline-selector-option value="high">God</inline-selector-option>
                </inline-selector>
            </cell>
            <cell>
                <inline-selector v-model="d.driver">
                    Driver: &nbsp;
                    <inline-selector-option value="low">Trash</inline-selector-option>
                    <inline-selector-option value="mid">1504</inline-selector-option>
                    <inline-selector-option value="high">God</inline-selector-option>
                </inline-selector>
            </cell>
        </group>
        <group>
            <cell class="no-padding">
                <input-textarea v-model="d.comments" placeholder="Additional Comments" />
            </cell>
        </group>
        <cell>
            <btn block size="lg" @click="submit">SUBMIT</btn>
        </cell>
        <!--<code>
            {{JSON.stringify(data)}}
        </code>-->
    </div>
</body>
<script>
var app = new Vue({
    el: '#app',
    data: {
        d: {
            match: null,
            team: null,
            drive: "tank",
            wheels: "4",
            color: "blue",
            airship: 1,
            autonmovement: ["moves"],
            autongears: "",
            autonballs: "",
            telopgears: "",
            telopgearsplaced: 0,
            telopballscore: "",
            telopballcollec: "",
            human: "mid",
            driver: "mid",
            comments: ""
        },
        default: {},
        data: [],
        menu: false,
        viewData: false,
        password: "",
        auth: atob("Ymx1ZWJhYmllc2FyZXVuaGVhbHRoeQ=="),
    },
    created: function() {
        this.default = JSON.parse(JSON.stringify(this.d));
        this.data = store("data") || [];
    },
    methods: {
        submit: function() {
            this.data.push(this.d)
            store("data", this.data);
            this.d = JSON.parse(JSON.stringify(this.default));
            this.$loading.toggle("Attempting to send...");
            this.$http.post('', this.data).then(function() {
                this.$loading.toggle();
                store.remove("data") //removes everything
                this.data = [];
                this.$alert({ //we did it reddit
                    message: 'Form Submitted',
                    title: ":D",
                    okText: "Okay",
                });
            }, function() {
                this.$loading.toggle();
                this.$alert({ //we did it reddit
                    message: 'Form was not submitted. There are now ' + this.data.length + " forms not submitted",
                    title: ":(",
                    okText: "Okay",
                });
            });
        },
        clear: function() {
            store(false);
            this.data = [];
        },
    }
})
</script>
<script>
if ('addEventListener' in document) {
    document.addEventListener('DOMContentLoaded', function() {
        FastClick.attach(document.body);
    }, false);
}
</script>

</html>
